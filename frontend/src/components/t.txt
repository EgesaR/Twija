<StepperNav className='relative flex justify-between w-full mb-12'>
          {steps.map((step, index) => (
            <StepperItem
              key={index}
              step={index + 1}
              className='relative flex flex-col items-center flex-1 z-10'
            >
              {/* The Line Separator: Now handled as a background-centered element */}
              {index < steps.length - 1 && (
                <StepperSeparator className='absolute top-4.5 left-[50%] right-[-50%] h-[2px] bg-muted' />
              )}

              <StepperTrigger
                asChild
                className='flex flex-col items-center gap-2 bg-background'
              >
                <div className='flex flex-col items-center cursor-pointer group'>
                  <StepperIndicator className='size-9 border-2 transition-all group-data-[state=active]:border-primary group-data-[state=active]:bg-primary/10 group-data-[state=completed]:bg-primary group-data-[state=completed]:border-primary'>
                    <step.icon className='size-4 group-data-[state=completed]:text-primary-foreground' />
                  </StepperIndicator>

                  <div className='flex flex-col items-center text-center'>
                    <StepperTitle className='text-xs sm:text-sm font-medium'>
                      {step.title}
                    </StepperTitle>

                    {/* Status Badges: Controlled via absolute positioning to prevent shifting nav height */}
                    <div className='h-4 relative mt-1'>
                      <Badge
                        variant='secondary'
                        className='text-[10px] px-1.5 py-0 group-data-[state=active]:inline-flex hidden absolute left-1/2 -translate-x-1/2 whitespace-nowrap'
                      >
                        In progress
                      </Badge>
                      <Badge
                        variant='default'
                        className='text-[10px] px-1.5 py-0 bg-green-500 hover:bg-green-600 group-data-[state=completed]:inline-flex hidden absolute left-1/2 -translate-x-1/2'
                      >
                        <Check className='size-2 mr-1' /> Done
                      </Badge>
                    </div>
                  </div>
                </div>
              </StepperTrigger>
            </StepperItem>
          ))}
        </StepperNav>

        class="rounded-full bg-muted group-data-[orientation=vertical]/stepper-nav:h-12 group-data-[orientation=vertical]/stepper-nav:w-0.5 group-data-[orientation=horizontal]/stepper-nav:h-0.5 absolute right-[-42.5%]! m-0 group-data-[orientation=horizontal]/stepper-nav:w-[calc(100%-2rem)] group-data-[orientation=horizontal]/stepper-nav:flex-none group-data-[state=completed]/step:bg-green-500 group-data-[orientation=horizontal]/stepper-nav:h-0.2!"